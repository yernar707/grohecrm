import * as React from "react"
import PropTypes from "prop-types"
import { Link, navigate } from "gatsby"
import { logout, getUser } from "../services/auth"

class Header extends React.Component {

  state = {
    user : ""
  }

  componentDidMount() {
    this.setState({ user : getUser() })
  }

  render() {
    return (
      <header
        style={{
          margin: `0 auto`,
          padding: `var(--space-4) var(--size-gutter)`,
          display: `flex`,
          alignItems: `center`,
          justifyContent: `space-between`,
          flexDirection: `column`,
          width: 80,
          position: `fixed`,
          background: `#0F2B4B`,
          minHeight: 768,
          height: `100%`,
          zIndex: 99,
        }}
        className="d-flex flex-column flex-shrink-0"
      >
        <ul className="nav nav-pills nav-flush flex-column mb-auto text-center" style={{marginLeft: 0}}>
          <li className="nav-item">
            <Link 
              to="/"
              onClick={event => {
                event.preventDefault()
                logout(() => navigate(`/`))
              }}
             
            >Выйти</Link>
            
          </li>
          <li className="nav-item">
            <Link activeClassName="active-nav-link" to="/main-page/desktop">
              <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16.72 0.832264C16.0708 0.294782 15.249 0 14.4 0C13.551 0 12.7292 0.294782 12.08 0.832264L1.28 9.78146C0.879135 10.1133 0.556894 10.5272 0.335804 10.9941C0.114714 11.4611 0.000108366 11.9698 0 12.4848V27.892C0 29.4103 1.2544 30.6425 2.8 30.6425H7.6C8.34261 30.6425 9.0548 30.3527 9.5799 29.8369C10.105 29.3211 10.4 28.6215 10.4 27.892V20.0336C10.4 19.7209 10.5264 19.4211 10.7515 19.2001C10.9765 18.979 11.2817 18.8548 11.6 18.8548H19.256C19.4054 17.8396 19.8407 16.8857 20.5128 16.1006C21.1848 15.3156 22.0669 14.7307 23.0594 14.412C24.0519 14.0932 25.1154 14.0534 26.1298 14.2969C27.1441 14.5404 28.069 15.0576 28.8 15.79V12.4848C28.7999 11.9698 28.6853 11.4611 28.4642 10.9941C28.2431 10.5272 27.9209 10.1133 27.52 9.78146L16.72 0.832264ZM28.8 19.6407C28.8 20.6827 28.3786 21.6822 27.6284 22.419C26.8783 23.1559 25.8609 23.5699 24.8 23.5699C23.7391 23.5699 22.7217 23.1559 21.9716 22.419C21.2214 21.6822 20.8 20.6827 20.8 19.6407C20.8 18.5986 21.2214 17.5991 21.9716 16.8623C22.7217 16.1254 23.7391 15.7114 24.8 15.7114C25.8609 15.7114 26.8783 16.1254 27.6284 16.8623C28.3786 17.5991 28.8 18.5986 28.8 19.6407ZM32 28.0885C32 30.534 29.9424 33 24.8 33C19.6576 33 17.6 30.5435 17.6 28.0885V27.9266C17.6 26.3863 18.8704 25.1416 20.4368 25.1416H29.1632C30.7312 25.1416 32 26.3879 32 27.9266V28.0885Z" fill="#5681B1"/>
              </svg>
              Рабочий стол
            </Link>
          </li>
          <li className="nav-item">
            <Link activeClassName="active-nav-link" to="/main-page/sdelki">
              <svg width="32" height="25" viewBox="0 0 32 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21.673 8.10254L26.733 2.64014C27.7305 1.66602 27.024 0 25.613 0H1.58693C0.17593 0 -0.530572 1.66602 0.466931 2.64014L9.59995 12.5V20.1133C9.59995 20.728 9.89645 21.3066 10.4 21.6758L14.3995 24.6055C15.4425 25.3691 16.823 24.9458 17.3605 23.9429C15.54 22.2354 14.4 19.8413 14.4 17.1875C14.4 12.8032 17.5025 9.12256 21.673 8.10254ZM24 9.375C19.5815 9.375 16 12.8726 16 17.1875C16 21.5024 19.5815 25 24 25C28.4185 25 32 21.5024 32 17.1875C32 12.8726 28.4185 9.375 24 9.375ZM24.8 21.0879V21.875C24.8 22.0908 24.621 22.2656 24.4 22.2656H23.6C23.379 22.2656 23.2 22.0908 23.2 21.875V21.0796C22.6355 21.0513 22.0865 20.8589 21.6315 20.5254C21.4365 20.3823 21.4265 20.0972 21.603 19.9326L22.1905 19.3853C22.329 19.2563 22.535 19.2505 22.697 19.3496C22.8905 19.4678 23.11 19.5312 23.338 19.5312H24.7435C25.0685 19.5312 25.3335 19.2422 25.3335 18.8872C25.3335 18.5967 25.153 18.3408 24.895 18.2656L22.645 17.6064C21.7155 17.334 21.066 16.4629 21.066 15.4878C21.066 14.2905 22.0185 13.3179 23.1995 13.2871V12.5C23.1995 12.2842 23.3785 12.1094 23.5995 12.1094H24.3995C24.6205 12.1094 24.7995 12.2842 24.7995 12.5V13.2954C25.364 13.3237 25.913 13.5156 26.368 13.8496C26.563 13.9927 26.573 14.2778 26.3965 14.4424L25.809 14.9897C25.6705 15.1187 25.4645 15.1245 25.3025 15.0254C25.109 14.9067 24.8895 14.8438 24.6615 14.8438H23.256C22.931 14.8438 22.666 15.1328 22.666 15.4878C22.666 15.7783 22.8465 16.0342 23.1045 16.1094L25.3545 16.7686C26.284 17.041 26.9335 17.9121 26.9335 18.8872C26.9335 20.085 25.9815 21.0571 24.8 21.0879Z" fill="white"/>
              </svg>
              Сделки
            </Link>
          </li>
          <li className="nav-item">
            <Link activeClassName="active-nav-link" to="/main-page/sklady">
              <svg width="31" height="29" viewBox="0 0 31 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M24.4125 19.9371H6.60687C6.39375 19.9371 6.21937 20.141 6.21937 20.3902L6.21453 23.1091C6.21453 23.3583 6.38891 23.5622 6.60203 23.5622H24.4125C24.6256 23.5622 24.8 23.3583 24.8 23.1091V20.3902C24.8 20.141 24.6256 19.9371 24.4125 19.9371ZM24.4125 25.3748H6.59234C6.37922 25.3748 6.20484 25.5787 6.20484 25.828L6.2 28.5469C6.2 28.7961 6.37437 29 6.5875 29H24.4125C24.6256 29 24.8 28.7961 24.8 28.5469V25.828C24.8 25.5787 24.6256 25.3748 24.4125 25.3748ZM24.4125 14.4993H6.61656C6.40344 14.4993 6.22906 14.7032 6.22906 14.9524L6.22422 17.6713C6.22422 17.9206 6.39859 18.1245 6.61172 18.1245H24.4125C24.6256 18.1245 24.8 17.9206 24.8 17.6713V14.9524C24.8 14.7032 24.6256 14.4993 24.4125 14.4993ZM29.5711 6.62586L16.3912 0.208168C16.108 0.0707393 15.8043 0 15.4976 0C15.1909 0 14.8872 0.0707393 14.6039 0.208168L1.42891 6.62586C0.566719 7.05069 0 8.03628 0 9.13517V28.5469C0 28.7961 0.174375 29 0.3875 29H4.2625C4.47563 29 4.65 28.7961 4.65 28.5469V14.4993C4.65 13.5024 5.35719 12.6867 6.22906 12.6867H24.7709C25.6428 12.6867 26.35 13.5024 26.35 14.4993V28.5469C26.35 28.7961 26.5244 29 26.7375 29H30.6125C30.8256 29 31 28.7961 31 28.5469V9.13517C31 8.03628 30.4333 7.05069 29.5711 6.62586Z" fill="#5681B1"/>
              </svg>
              Склады
            </Link>
          </li>
          <li className={`nav-item ${this.state.user === "Admin" ? "display-none" : ""}`}>
            <Link activeClassName="active-nav-link" to="/main-page/staff">
              <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.5019 17.8095H3.2381C2.3793 17.8095 1.55568 18.1507 0.948416 18.7579C0.341155 19.3652 0 20.1888 0 21.0476V23.4762L0.00809542 23.8486C0.267143 29.2141 6.11676 30.7619 10.5238 30.7619C12.1914 30.7619 14.0679 30.5401 15.7679 29.9734C14.9795 28.4684 14.5689 26.7943 14.5714 25.0952C14.5714 22.2684 15.687 19.7006 17.5019 17.8095ZM17.8095 7.28571C17.8095 5.35342 17.0419 3.50027 15.6756 2.13394C14.3093 0.7676 12.4561 0 10.5238 0C8.59152 0 6.73837 0.7676 5.37203 2.13394C4.00569 3.50027 3.2381 5.35342 3.2381 7.28571C3.2381 9.21801 4.00569 11.0712 5.37203 12.4375C6.73837 13.8038 8.59152 14.5714 10.5238 14.5714C12.4561 14.5714 14.3093 13.8038 15.6756 12.4375C17.0419 11.0712 17.8095 9.21801 17.8095 7.28571ZM30.7619 8.90476C30.7619 7.40187 30.1649 5.96053 29.1022 4.89782C28.0395 3.83512 26.5981 3.2381 25.0952 3.2381C23.5923 3.2381 22.151 3.83512 21.0883 4.89782C20.0256 5.96053 19.4286 7.40187 19.4286 8.90476C19.4286 10.4077 20.0256 11.849 21.0883 12.9117C22.151 13.9744 23.5923 14.5714 25.0952 14.5714C26.5981 14.5714 28.0395 13.9744 29.1022 12.9117C30.1649 11.849 30.7619 10.4077 30.7619 8.90476ZM34 25.0952C34 27.4569 33.0618 29.7219 31.3919 31.3919C29.7219 33.0618 27.4569 34 25.0952 34C22.7335 34 20.4686 33.0618 18.7986 31.3919C17.1287 29.7219 16.1905 27.4569 16.1905 25.0952C16.1905 22.7335 17.1287 20.4686 18.7986 18.7986C20.4686 17.1287 22.7335 16.1905 25.0952 16.1905C27.4569 16.1905 29.7219 17.1287 31.3919 18.7986C33.0618 20.4686 34 22.7335 34 25.0952ZM30.5255 21.284C30.4503 21.2086 30.361 21.1488 30.2626 21.108C30.1643 21.0672 30.0589 21.0462 29.9524 21.0462C29.8459 21.0462 29.7405 21.0672 29.6421 21.108C29.5438 21.1488 29.4544 21.2086 29.3792 21.284L23.4762 27.1887L20.8112 24.5221C20.6592 24.3701 20.4531 24.2847 20.2381 24.2847C20.0231 24.2847 19.817 24.3701 19.665 24.5221C19.5129 24.6741 19.4275 24.8803 19.4275 25.0952C19.4275 25.3102 19.5129 25.5164 19.665 25.6684L22.903 28.9065C22.9782 28.9819 23.0676 29.0417 23.1659 29.0825C23.2643 29.1233 23.3697 29.1443 23.4762 29.1443C23.5827 29.1443 23.6881 29.1233 23.7865 29.0825C23.8848 29.0417 23.9741 28.9819 24.0493 28.9065L30.5255 22.4303C30.6009 22.3551 30.6607 22.2658 30.7015 22.1674C30.7423 22.0691 30.7634 21.9636 30.7634 21.8571C30.7634 21.7507 30.7423 21.6452 30.7015 21.5469C30.6607 21.4485 30.6009 21.3592 30.5255 21.284Z" fill="#5681B1"/>
              </svg>
              Сотрудники
            </Link>
          </li>
          <li className="nav-item">
            <Link activeClassName="active-nav-link" to="/main-page/requests">
              <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" fill="currentColor" className="bi bi-card-checklist" viewBox="0 0 16 16">
                  <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
                  <path d="M7 5.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm-1.496-.854a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0zM7 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm-1.496-.854a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 0 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0z"/>
              </svg>
              Заявки
            </Link>
          </li>
          <li className="nav-item">
            <Link activeClassName="active-nav-link" to="/main-page/analytics">
              <svg width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fillRule="evenodd" clipRule="evenodd" d="M13.8667 0.630986C14.4821 0.221406 15.2307 0 16 0C16.7693 0 17.5179 0.221406 18.1333 0.630986L30.5778 8.91268C31.0194 9.20655 31.3778 9.58761 31.6246 10.0257C31.8715 10.4638 32 10.9468 32 11.4366V24.8451C32 25.6818 31.6254 26.4843 30.9586 27.0759C30.2918 27.6676 29.3874 28 28.4444 28H3.55556C2.61256 28 1.70819 27.6676 1.0414 27.0759C0.374602 26.4843 0 25.6818 0 24.8451V11.4366C0 10.9468 0.128516 10.4638 0.37537 10.0257C0.622224 9.58761 0.980636 9.20655 1.42222 8.91268L13.8667 0.630986ZM17.7778 10.6479C17.7778 10.2295 17.5905 9.82828 17.2571 9.53245C16.9237 9.23662 16.4715 9.07042 16 9.07042C15.5285 9.07042 15.0763 9.23662 14.7429 9.53245C14.4095 9.82828 14.2222 10.2295 14.2222 10.6479V20.1127C14.2222 20.531 14.4095 20.9323 14.7429 21.2281C15.0763 21.5239 15.5285 21.6901 16 21.6901C16.4715 21.6901 16.9237 21.5239 17.2571 21.2281C17.5905 20.9323 17.7778 20.531 17.7778 20.1127V10.6479ZM10.6667 15.3803C10.6667 14.9619 10.4794 14.5607 10.146 14.2648C9.81257 13.969 9.36038 13.8028 8.88889 13.8028C8.41739 13.8028 7.96521 13.969 7.63181 14.2648C7.29841 14.5607 7.11111 14.9619 7.11111 15.3803V20.1127C7.11111 20.531 7.29841 20.9323 7.63181 21.2281C7.96521 21.5239 8.41739 21.6901 8.88889 21.6901C9.36038 21.6901 9.81257 21.5239 10.146 21.2281C10.4794 20.9323 10.6667 20.531 10.6667 20.1127V15.3803ZM24.8889 18.5352C24.8889 18.1168 24.7016 17.7156 24.3682 17.4198C24.0348 17.1239 23.5826 16.9577 23.1111 16.9577C22.6396 16.9577 22.1874 17.1239 21.854 17.4198C21.5206 17.7156 21.3333 18.1168 21.3333 18.5352V20.1127C21.3333 20.531 21.5206 20.9323 21.854 21.2281C22.1874 21.5239 22.6396 21.6901 23.1111 21.6901C23.5826 21.6901 24.0348 21.5239 24.3682 21.2281C24.7016 20.9323 24.8889 20.531 24.8889 20.1127V18.5352Z" fill="#5681B1"/>
              </svg>
              Аналитика
            </Link>
          </li>
          <li className="nav-item">
            <Link activeClassName="active-nav-link" to="/main-page/integrations">
              <svg width="32" height="35" viewBox="0 0 32 35" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M28.4444 3.5H21.0133C20.2667 1.47 18.3111 0 16 0C13.6889 0 11.7333 1.47 10.9867 3.5H3.55556C3.30667 3.5 3.07556 3.5175 2.84444 3.57C2.27825 3.68694 1.74941 3.93759 1.30345 4.30036C0.857495 4.66313 0.507791 5.12716 0.284445 5.6525C0.106667 6.055 0 6.51 0 7V31.5C0 31.9725 0.106667 32.445 0.284445 32.865C0.462222 33.285 0.728889 33.6525 1.04889 33.985C1.52889 34.4575 2.15111 34.8075 2.84444 34.9475C3.07556 34.9825 3.30667 35 3.55556 35H28.4444C30.4 35 32 33.425 32 31.5V7C32 5.075 30.4 3.5 28.4444 3.5ZM14.2222 23.0475L11.7156 25.5325L5.33333 19.25L11.7156 12.9675L14.2222 15.4525L10.3644 19.25L14.2222 23.0475ZM16 5.6875C15.2711 5.6875 14.6667 5.0925 14.6667 4.375C14.6667 3.6575 15.2711 3.0625 16 3.0625C16.7289 3.0625 17.3333 3.6575 17.3333 4.375C17.3333 5.0925 16.7289 5.6875 16 5.6875ZM20.2844 25.5325L17.7778 23.0475L21.6356 19.25L17.7778 15.4525L20.2844 12.9675L26.6667 19.25L20.2844 25.5325Z" fill="#5681B1"/>
              </svg>
              Интеграции
            </Link>
          </li>
        </ul> 
      </header>
      
    )
  }
}

Header.propTypes = {
  siteTitle: PropTypes.string,
}

Header.defaultProps = {
  siteTitle: ``,
}

export default Header
